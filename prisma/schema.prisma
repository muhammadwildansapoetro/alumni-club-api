generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "darwin-arm64", "windows"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ------------------------------------------------------
// ENUMS
// ------------------------------------------------------

enum UserRole {
  USER
  ADMIN
}

enum AuthProvider {
  EMAIL
  GOOGLE
}

enum Department {
  TEP
  TPN
  TIN
}

enum EmploymentLevel {
  INTERN
  STAFF
  SUPERVISOR
  MANAGER
  SENIOR_MANAGER
  DIRECTOR
  VP
  C_LEVEL
  FOUNDER
  OTHER
}

enum IncomeRange {
  BELOW_5M
  RANGE_5_10M
  RANGE_10_20M
  ABOVE_20M
  UNKNOWN
}

// could be improved later
enum IndustryField {
  AGRICULTURE
  FOOD_TECH
  BIOTECH
  RESEARCH
  EDUCATION
  ENGINEERING
  BUSINESS
  MARKETING
  FINANCE
  GOVERNMENT
  FREELANCE
  OTHER
}

// ------------------------------------------------------
// USER (Auth base)
// ------------------------------------------------------

model User {
  id            String        @id @default(cuid())
  email         String        @unique
  name          String?
  password      String?
  googleId      String?       @unique
  avatar        String?
  authProvider  AuthProvider  @default(EMAIL)
  role          UserRole      @default(USER)

  profile       AlumniProfile?
  jobPostings   JobPosting[]
  businessPosts BusinessPosting[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ------------------------------------------------------
// ALUMNI PROFILE (Main Data)
// ------------------------------------------------------

model AlumniProfile {
  id     String @id @default(cuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])

  fullName   String
  department Department
  classYear  Int
  city       String?

  industry        IndustryField?
  employmentLevel EmploymentLevel?
  incomeRange     IncomeRange?
  jobTitle        String?
  companyName     String?

  linkedInUrl String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ------------------------------------------------------
// JOB POSTING
// ------------------------------------------------------

model JobPosting {
  id     String @id @default(cuid())
  userId String
  user   User   @relation(fields: [userId], references: [id])

  title       String
  description String
  company     String?
  externalUrl String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ------------------------------------------------------
// BUSINESS / SHOP MODULE
// ------------------------------------------------------

model BusinessPosting {
  id     String @id @default(cuid())
  userId String
  user   User   @relation(fields: [userId], references: [id])

  businessName   String
  description    String
  productName    String?
  priceStartFrom Int?
  externalUrl    String?
  contactInfo    String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
