generator client {
  provider      = "prisma-client-js"
  output        = "../generated/prisma"
  binaryTargets = ["native", "darwin-arm64", "windows"]
}

datasource db {
  provider = "postgresql"
}

model User {
  id                       String              @id @default(cuid())
  email                    String              @unique
  name                     String?
  password                 String?             // For email/password authentication
  googleId                 String?             @unique  // For Google OAuth
  authMethod               AuthMethod          @default(EMAIL)
  role                     UserRole            @default(USER)
  emailVerified            Boolean             @default(false)
  emailVerificationToken   String?             @unique
  emailVerificationExpires DateTime?
  passwordResetToken       String?             @unique
  passwordResetExpires     DateTime?
  deletedAt                DateTime?
  createdAt                DateTime            @default(now())
  updatedAt                DateTime            @updatedAt
  profile                  AlumniProfile?
  businessListings         BusinessDirectory[]
  jobPostings              JobPosting[]
}

model AlumniProfile {
  id              String           @id @default(cuid())
  userId          String           @unique
  fullName        String
  department      Department
  classYear       Int
  city            String?
  industry        IndustryField?
  employmentLevel EmploymentLevel?
  incomeRange     IncomeRange?
  jobTitle        String?
  companyName     String?
  linkedInUrl     String?
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  user            User             @relation(fields: [userId], references: [id])
}

model JobPosting {
  id          String   @id @default(cuid())
  userId      String
  title       String
  description String
  company     String?
  location    String?
  jobType     String?
  salaryRange String?
  externalUrl String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  user        User     @relation(fields: [userId], references: [id])
}

model BusinessDirectory {
  id           String   @id @default(cuid())
  userId       String
  businessName String
  description  String
  category     String?
  location     String?
  website      String?
  contactInfo  String?
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id])
}

model Statistics {
  id           String         @id @default(cuid())
  type         StatisticsType @unique
  alumniData   Json?
  jobData      Json?
  businessData Json?
  totalItems   Int            @default(0)
  lastUpdated  DateTime       @default(now())
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
}

enum UserRole {
  USER
  ADMIN
}

enum AuthMethod {
  EMAIL
  GOOGLE
  BOTH
}

enum Department {
  TEP
  TPN
  TIN
}

enum EmploymentLevel {
  INTERN
  STAFF
  SUPERVISOR
  MANAGER
  SENIOR_MANAGER
  DIRECTOR
  VP
  C_LEVEL
  FOUNDER
  OTHER
}

enum IncomeRange {
  BELOW_5M
  RANGE_5_10M
  RANGE_10_20M
  ABOVE_20M
  UNKNOWN
}

enum IndustryField {
  AGRICULTURE
  FOOD_TECH
  BIOTECH
  RESEARCH
  EDUCATION
  ENGINEERING
  BUSINESS
  MARKETING
  FINANCE
  GOVERNMENT
  FREELANCE
  OTHER
}

enum StatisticsType {
  ALUMNI
  JOB_POSTINGS
  BUSINESS_POSTINGS
}
